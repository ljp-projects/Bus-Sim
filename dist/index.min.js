"use strict";const Routes=Object.freeze({MakeRoute:e=>{var s={"Albanese Beach":1e3,Scomoville:2e3,"Edison Square":2100,"Finhorn Valley":1100,Musk:1110,Eloneville:3e3,"Musk Square":1111,"Anthony Corner":1120,"El Salvador":3100,length:9};const o=[];for(let t=0;t<e;t++){var i=Math.max(~~(17*Math.random()),4),n=Object.keys(s)[~~(Math.random()*s.length)];o.push({name:n,code:s[n],timeSecs:i})}return{stops:o,totalTimeSecs:(()=>{let e=0;return o.forEach(t=>{e+=t.timeSecs}),e})()}},TravelRoute:i=>{!function t(e){const s=i.stops[i.stops.indexOf(e)!==i.stops.length-1?i.stops.indexOf(e)+1:-1],o=i.stops[0!==i.stops.indexOf(e)?i.stops.indexOf(e)-1:-1];console.log(null==o?`Travelling to ${e.name} (${e.code}), which would take ${e.timeSecs} irl seconds, or ${5*e.timeSecs} game minutes.`:`Travelling to ${e.name} (${e.code}) from ${o.name} (${o.code}), which would take ${e.timeSecs} irl seconds, or ${5*e.timeSecs} game minutes.`),setTimeout(()=>{null!=s?t(s):console.log(`Finished travelling! Travel took ${i.totalTimeSecs} irl seconds, or ${5*i.totalTimeSecs} game minutes.`)},1e3*e.timeSecs)}(i.stops[0])},length:2});class Bus{constructor(t,e,s){this.hasRoute=!1,this.status=0,this.name=t,this.id=e,s&&this.addRoute(s)}addRoute(t){return this.hasRoute=!0,this.route=t,this}removeRoute(){return this.hasRoute=!1,this.route=void 0,this}travel(){if(this.route&&this.hasRoute){const i=t=>{if(this.route&&this.hasRoute){var e=this.route.stops.indexOf(t);console.log(e);const o=this.route.stops[e!==this.route.stops.length-1?e+1:-1];var s=this.route.stops[0!==e?e-1:-1];this.status<=8?console.log(t,null!=o?o:null,null!=s?s:null):9===this.status?console.log("Bus has broken down."):10===this.status&&console.log("Bus is out of fuel."),e%2!=0&&this.status<=8||(this.status=~~(11*Math.random())),o&&setTimeout(()=>i(o),1e3*t.timeSecs)}};i(this.route.stops[0])}return this}addToList(t){var e=`
        <b>${this.name}</b>
        <p>(${this.id})</p>
        <br>
        <button id="BUS-${this.id}-CHECK">Check</button>
        `,s=document.createElement("li"),e=(s.innerHTML=e,document.getElementById(`BUS-${this.id}-CHECK`));return null!=e&&e.addEventListener("click",()=>{const t=document.getElementById("about-bus");var e=`
            <h2>${this.name}</h2>
            <p>${this.status<=8?"Normal":9===this.status?"Bus has broken down.":10===this.status?"Bus is out of fuel":"UNKOWN"}</p>
            <button id="BUS-${this.id}-CLOSE">Close</button>
            `;t&&(t.innerHTML=e,t.showModal(),null!=(e=document.getElementById(`BUS-${this.id}-CLOSE`)))&&e.addEventListener("click",()=>{t.close(),t.innerHTML=""})}),null!=t&&t.appendChild(s),this}}const bus=new Bus("Pizza",(new Date).getTime(),Routes.MakeRoute(5));bus.addToList(document.getElementById("buses"));